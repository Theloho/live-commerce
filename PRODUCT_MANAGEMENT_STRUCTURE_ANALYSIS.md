# 🛍️ 상품 관리 시스템 구조 분석

## 📋 현재 상품 관리 구조 파악

### 🎯 사용자 경험 (프론트엔드)
```
홈페이지 (app/page.js)
├── useRealtimeProducts() - 실시간 상품 데이터
├── ProductGrid - 상품 표시 컴포넌트
├── LiveBanner - 라이브 방송 배너
└── 사용자 구매 플로우 연결
```

### ⚙️ 관리자 상품 관리 (현재)
```
/admin/products (app/admin/products/page.js)
├── 모든 상품 CRUD 기능
├── 상품 검색/필터링
├── 실시간 재고 관리
├── 상품 이미지 업로드
└── 상품 정보 수정/삭제
```

### 🗄️ 데이터 구조 추정
```sql
products 테이블 (추정)
├── id (UUID)
├── title (상품명)
├── description (설명)
├── price (가격)
├── compare_price (정가)
├── inventory (재고)
├── seller (판매자)
├── badge (배지)
├── freeShipping (무료배송)
├── image_url (이미지)
├── created_at
└── updated_at
```

---

## 🎯 개선 목표: 이중 구조 상품 관리

### 📺 **실시간 방송 컨트롤 페이지**
**경로**: `/admin/products` (현재 페이지 개선)
**용도**: 라이브 방송 중 실시간 상품 관리

**필요한 데이터 구조 확장**:
```sql
products 테이블에 추가 필요:
├── is_live_active (BOOLEAN) - 현재 라이브 판매 중 여부
├── live_priority (INTEGER) - 라이브 방송 순서
├── live_start_time (TIMESTAMP) - 라이브 시작 시간
└── live_end_time (TIMESTAMP) - 라이브 종료 시간
```

**UI 특징**:
- 큰 버튼, 터치 친화적
- 실시간 재고 업데이트
- 간단한 온/오프 토글
- 방송 순서 조정
- 실시간 판매 현황

### 🛍️ **전체 상품 관리 페이지**
**경로**: `/admin/products/catalog` (신규 생성)
**용도**: 상품 마스터 데이터 관리

**필요한 데이터 구조 확장**:
```sql
products 테이블에 추가 필요:
├── category_id (UUID) - 카테고리 분류
├── tags (TEXT[]) - 태그 배열
├── status (TEXT) - 상품 상태 (active/draft/archived)
├── sku (TEXT) - 상품 코드
└── notes (TEXT) - 관리자 메모

categories 테이블 (신규 필요):
├── id (UUID)
├── name (TEXT)
├── parent_id (UUID) - 계층 구조
├── sort_order (INTEGER)
└── created_at
```

**UI 특징**:
- 상세한 테이블 뷰
- 고급 검색/필터링
- 벌크 액션 (일괄 수정/삭제)
- 카테고리 관리
- 상품 상세 정보 폼

---

## 🔄 데이터 흐름 설계

### 1. **라이브 방송 준비 플로우**
```
전체 상품 관리 → 상품 선택 → "라이브 추가" 버튼
↓
products.is_live_active = true
products.live_priority = 설정값
↓
실시간 방송 컨트롤에 표시
```

### 2. **라이브 방송 중 플로우**
```
실시간 방송 컨트롤 → 상품 온/오프 토글
↓
실시간 inventory 업데이트
↓
프론트엔드 useRealtimeProducts 자동 업데이트
```

### 3. **라이브 종료 플로우**
```
실시간 방송 컨트롤 → "판매 종료" 버튼
↓
products.is_live_active = false
products.live_end_time = NOW()
↓
전체 상품 관리로 이동
```

---

## 🛠️ 구현 단계

### Phase 1: 데이터베이스 확장
1. **products 테이블 컬럼 추가**
2. **categories 테이블 생성**
3. **인덱스 최적화**

### Phase 2: 전체 상품 관리 페이지 구축
1. **`/admin/products/catalog` 신규 생성**
2. **상세한 CRUD 인터페이스**
3. **카테고리 관리 시스템**
4. **고급 검색/필터링**

### Phase 3: 실시간 방송 컨트롤 개선
1. **현재 `/admin/products` 개선**
2. **라이브 전용 UI로 변경**
3. **실시간 업데이트 강화**
4. **방송 친화적 레이아웃**

### Phase 4: 페이지 간 연동
1. **탭 네비게이션 구축**
2. **데이터 동기화**
3. **사용자 플로우 최적화**

---

## 🎨 UI/UX 설계 방향

### 실시간 방송 컨트롤
```
┌─────────────────────────────────────┐
│ 📺 라이브 방송 컨트롤               │
├─────────────────────────────────────┤
│ [상품A] [재고:50] [🔴ON ] [↑순서]  │
│ [상품B] [재고:30] [⚫OFF] [↓순서]  │
│ [상품C] [재고:20] [🔴ON ] [↑순서]  │
├─────────────────────────────────────┤
│ [+ 상품 추가] [📊 실시간 현황]      │
└─────────────────────────────────────┘
```

### 전체 상품 관리
```
┌─────────────────────────────────────┐
│ 🛍️ 전체 상품 관리                  │
├─────────────────────────────────────┤
│ [검색] [카테고리▼] [상태▼] [필터]   │
├─────────────────────────────────────┤
│ □ 상품명    카테고리  가격  재고  액션│
│ □ 아이템A   전자제품  30000  50  [📺][✏️][🗑️]│
│ □ 아이템B   생활용품  15000  30  [📺][✏️][🗑️]│
└─────────────────────────────────────┘
```

---

## 🔍 구현 전 확인사항

### 1. 현재 데이터베이스 스키마 확인
- products 테이블 정확한 구조
- 기존 데이터 유지 방안
- 확장 가능한 컬럼 설계

### 2. 기존 기능 영향도 분석
- 프론트엔드 useRealtimeProducts 연동
- 주문 시스템과의 연계
- 재고 관리 로직 확인

### 3. 성능 고려사항
- 실시간 업데이트 최적화
- 대용량 상품 데이터 처리
- 검색 성능 최적화

---

**📋 다음 단계**: 현재 products 테이블 구조 정확히 파악 후 구현 시작