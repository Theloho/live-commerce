# TODO - 2025-10-14 (ë‚´ì¼ ì‘ì—…)

## ğŸ¯ ë‚¨ì€ ì‘ì—…: ê´€ë¦¬ì í˜ì´ì§€ Service Role API ì „í™˜ (3ê°œ)

### ìš°ì„ ìˆœìœ„

#### 1. ğŸ“‹ ì¹´í…Œê³ ë¦¬ ê´€ë¦¬ (`/admin/categories`) - ì¤‘ê°„ ë‚œì´ë„
**í˜„ì¬ ìƒíƒœ**: í´ë¼ì´ì–¸íŠ¸ Supabase ì‚¬ìš©
**ë¬¸ì œ**: ëª¨ë°”ì¼ì—ì„œ ë°ì´í„° ì¡°íšŒ ê°€ëŠ¥ì„± ìˆìŒ

**ì‘ì—… ë‚´ìš©**:
- [ ] API ìƒì„±: `/api/admin/categories` (GET, POST, PUT)
- [ ] `loadCategories()` í•¨ìˆ˜ Service Role APIë¡œ ì „í™˜
- [ ] `handleSave()` í•¨ìˆ˜ Service Role APIë¡œ ì „í™˜
- [ ] `handleToggleActive()` í•¨ìˆ˜ Service Role APIë¡œ ì „í™˜
- [ ] ê° ì¹´í…Œê³ ë¦¬ì˜ ìƒí’ˆ ê°œìˆ˜ ì§‘ê³„ í¬í•¨

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 15ë¶„

---

#### 2. âš™ï¸ ì„¤ì • í˜ì´ì§€ (`/admin/settings`) - ë‚®ì€ ë‚œì´ë„
**í˜„ì¬ ìƒíƒœ**: localStorage ì‚¬ìš© (DB ì‚¬ìš© ì•ˆ í•¨)
**ë¬¸ì œ**: ì—†ìŒ (ë³€ê²½ ë¶ˆí•„ìš”í•  ìˆ˜ ìˆìŒ)

**í™•ì¸ ì‚¬í•­**:
- [ ] í˜ì´ì§€ ê¸°ëŠ¥ í™•ì¸ (localStorageë§Œ ì‚¬ìš©í•˜ëŠ”ì§€)
- [ ] DB ì—°ë™ì´ í•„ìš”í•œì§€ í™•ì¸
- [ ] í•„ìš” ì‹œ ì„¤ì • í…Œì´ë¸” ìƒì„± + API êµ¬ì¶•

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 5-10ë¶„ (í™•ì¸ë§Œ) ë˜ëŠ” 20ë¶„ (DB ì—°ë™ í•„ìš” ì‹œ)

---

#### 3. ğŸ‘¥ ê´€ë¦¬ì ê´€ë¦¬ (`/admin/admins`) - ë†’ì€ ë‚œì´ë„ âš ï¸
**í˜„ì¬ ìƒíƒœ**: í´ë¼ì´ì–¸íŠ¸ Supabase ì‚¬ìš© (8ê°œ ì¿¼ë¦¬)
**ë¬¸ì œ**: ë³µì¡í•œ ê¶Œí•œ ê´€ë¦¬ + ì—¬ëŸ¬ í…Œì´ë¸” ì¡°ì¸

**ì‘ì—… ë‚´ìš©**:
- [ ] API ìƒì„±: `/api/admin/admins` (GET, POST, PUT, DELETE)
- [ ] `loadAdmins()` í•¨ìˆ˜ Service Role APIë¡œ ì „í™˜
  - profiles ì¡°íšŒ (is_admin, is_master)
  - admin_permissions ì¡°íšŒ ë° ë§¤í•‘
- [ ] `handleCreateAdmin()` í•¨ìˆ˜ Service Role APIë¡œ ì „í™˜
  - Supabase Auth íšŒì›ê°€ì… ì²˜ë¦¬
  - profiles.is_admin ì„¤ì •
- [ ] ê¶Œí•œ ìˆ˜ì •/ì‚­ì œ ê¸°ëŠ¥ Service Role APIë¡œ ì „í™˜

**ì£¼ì˜ ì‚¬í•­**:
- Master ê´€ë¦¬ìë§Œ ì ‘ê·¼ ê°€ëŠ¥ (`isMaster` ì²´í¬)
- Supabase Auth API ì‚¬ìš© (íšŒì›ê°€ì…)
- ë³µì¡í•œ ê¶Œí•œ ì‹œìŠ¤í…œ

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 30-40ë¶„

---

## ğŸ“Š ì§„í–‰ ìƒí™©

### âœ… ì™„ë£Œ (5/8 - 62.5%)
1. `/admin/deposits` - ì…ê¸ˆ í™•ì¸
2. `/admin/shipping` - ë°œì†¡ ê´€ë¦¬
3. `/admin/purchase-orders` - ë°œì£¼ ê´€ë¦¬
4. `/admin/customers` - ê³ ê° ê´€ë¦¬
5. `/admin/suppliers` - ê³µê¸‰ì—…ì²´ ê´€ë¦¬

### â³ ë‚¨ìŒ (3/8 - 37.5%)
6. `/admin/categories` - ì¹´í…Œê³ ë¦¬ ê´€ë¦¬
7. `/admin/settings` - ì„¤ì •
8. `/admin/admins` - ê´€ë¦¬ì ê´€ë¦¬

---

## ğŸ¯ ì¶”ì²œ ì‘ì—… ìˆœì„œ

**ì˜µì…˜ 1: ë¹ ë¥¸ ì™„ë£Œ (30ë¶„)**
1. ì¹´í…Œê³ ë¦¬ ê´€ë¦¬ (15ë¶„)
2. ì„¤ì • í™•ì¸ (5-10ë¶„)
3. ê´€ë¦¬ì ê´€ë¦¬ (ë‚˜ì¤‘ì—)

**ì˜µì…˜ 2: ì™„ì „ ì™„ë£Œ (1ì‹œê°„)**
1. ì¹´í…Œê³ ë¦¬ ê´€ë¦¬ (15ë¶„)
2. ì„¤ì • í™•ì¸ (10ë¶„)
3. ê´€ë¦¬ì ê´€ë¦¬ (30-40ë¶„)

---

## ğŸ“ ì°¸ê³ ì‚¬í•­

### ìƒì„±ëœ Service Role API íŒ¨í„´
```javascript
// 1. ê´€ë¦¬ì ì¸ì¦ í™•ì¸
const { adminEmail } = await request.json()
const isAdmin = await verifyAdminAuth(adminEmail)
if (!isAdmin) return 403

// 2. Service Roleë¡œ RLS ìš°íšŒ
const { data } = await supabaseAdmin.from('table').select(...)
```

### í˜ì´ì§€ ì „í™˜ íŒ¨í„´
```javascript
// Before
const data = await supabase.from('table').select(...)

// After
const { adminUser } = useAdminAuth()
const response = await fetch(`/api/admin/xxx?adminEmail=${adminUser.email}`)
const { data } = await response.json()
```

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸ (ì‘ì—… ì™„ë£Œ í›„)

**ì›¹ ë¸Œë¼ìš°ì €**:
- [ ] ì¹´í…Œê³ ë¦¬ ëª©ë¡ í‘œì‹œ
- [ ] ì¹´í…Œê³ ë¦¬ ì¶”ê°€/ìˆ˜ì •/ì‚­ì œ
- [ ] ì„¤ì • í˜ì´ì§€ ì •ìƒ ì‘ë™
- [ ] ê´€ë¦¬ì ëª©ë¡ í‘œì‹œ
- [ ] ê´€ë¦¬ì ì¶”ê°€/ê¶Œí•œ ìˆ˜ì •

**ëª¨ë°”ì¼**:
- [ ] ìœ„ í˜ì´ì§€ë“¤ì´ ëª¨ë‘ ë°ì´í„° ì •ìƒ í‘œì‹œ

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-10-14 (ì„¸ì…˜ ì¢…ë£Œ ì‹œ)
