# E2E 테스트 가이드

## 🎯 실제 카카오 로그인을 사용한 E2E 테스트

이 프로젝트는 **실제 카카오 계정**으로 로그인하여 E2E 테스트를 수행합니다.

### ✅ 장점
- JWT 토큰 만료 문제 없음 ✅
- 실제 사용자 플로우 그대로 테스트 ✅
- \`.env.test\` 파일 불필요 ✅
- 한 번 로그인하면 계속 재사용 ✅

---

## 📋 테스트 실행 방법

### 1️⃣ 처음 한 번만: 로그인 상태 저장

\`\`\`bash
npm run test:setup
\`\`\`

**실행 과정**:
1. 브라우저가 자동으로 열림 (allok.shop/login)
2. **카카오 로그인 버튼 클릭**
3. 이미 카카오에 로그인되어 있으면 자동 승인
4. allok.shop 홈페이지로 리다이렉트
5. 로그인 상태가 \`playwright/.auth/user.json\`에 저장됨 ✅

---

### 2️⃣ 실제 버그 탐지 테스트 실행

\`\`\`bash
# 크롬 브라우저만 (빠름)
npm run test:bugs

# UI 모드 (디버깅 편함)
npm run test:bugs:ui

# 브라우저 보면서 실행
npm run test:bugs:headed
\`\`\`

**테스트 목록** (12개):
- ✅ Bug #1, #3: 프로필 로딩 (2개)
- ✅ Bug #2: 주문 수량 조정 (1개)
- ✅ Bug #4: 배송비 계산 (4개)
- ✅ Bug #5, #6: 장바구니 주문 (1개)
- ✅ Bug #7: 관리자 쿠폰 배포 (1개)
- ✅ Bug #8: Auth 세션 (2개)
- ✅ 종합 E2E: 전체 구매 플로우 (1개)

---

## 🔄 로그인 만료 시

JWT 토큰이 만료되어 테스트가 실패하면:

\`\`\`bash
npm run test:setup
\`\`\`

다시 실행하여 새로운 로그인 상태를 저장하세요.

---

**마지막 업데이트**: 2025-10-06  
**테스트 대상**: https://allok.shop  
**테스트 도구**: Playwright v1.55.1
