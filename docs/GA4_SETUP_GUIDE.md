# Google Analytics 4 (GA4) ì„¤ì • ê°€ì´ë“œ

## ğŸ“Š ê°œìš”

ì´ ë¬¸ì„œëŠ” Google Analytics 4ì—ì„œ ê³ ê° ì •ë³´ë¥¼ í¬í•¨í•œ êµ¬ë§¤ ì´ë²¤íŠ¸ë¥¼ ë³´ê¸° ìœ„í•œ ì„¤ì • ê°€ì´ë“œì…ë‹ˆë‹¤.

## âœ… ì™„ë£Œëœ êµ¬í˜„

### 1. GA íŠ¸ë˜í‚¹ í•¨ìˆ˜ ìƒì„±
- **íŒŒì¼**: `lib/analytics.js`
- **ê¸°ëŠ¥**: `trackPurchase(order, user)` í•¨ìˆ˜ì— ê³ ê° ì •ë³´ ì¶”ê°€

### 2. ì£¼ë¬¸ ì™„ë£Œ í˜ì´ì§€ ì—°ë™
- **íŒŒì¼**: `app/orders/[id]/complete/page.js`
- **ê¸°ëŠ¥**: ì£¼ë¬¸ ì™„ë£Œ ì‹œ ì‚¬ìš©ì ì •ë³´ì™€ í•¨ê»˜ GA ì´ë²¤íŠ¸ ì „ì†¡

### 3. ì „ì†¡ë˜ëŠ” Custom Parameters

```javascript
{
  // ê¸°ë³¸ ê±°ë˜ ì •ë³´
  transaction_id: "ORD-20251106-1234",
  value: 50000,
  currency: "KRW",
  shipping: 3000,

  // ğŸ†• ì‚¬ìš©ì ì •ë³´ (Custom Parameters)
  user_id: "uuid-123",
  customer_name: "í™ê¸¸ë™",
  customer_email: "hong@example.com",
  customer_phone: "010-1234-5678",

  // ë°°ì†¡ ì •ë³´
  shipping_address: "ì„œìš¸ì‹œ ê°•ë‚¨êµ¬...",
  shipping_postal_code: "06234",

  // í• ì¸ ì •ë³´
  coupon: "WELCOME10",
  discount: 5000,

  // ìƒí’ˆ ëª©ë¡
  items: [...]
}
```

## ğŸ”§ GA4 ëŒ€ì‹œë³´ë“œ ì„¤ì • (í•„ìˆ˜!)

í˜„ì¬ êµ¬í˜„ë§Œìœ¼ë¡œëŠ” GA4 ëŒ€ì‹œë³´ë“œì—ì„œ `customer_name` ë“±ì˜ ì •ë³´ë¥¼ **ë³¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤**.
GA4ì—ì„œ **Custom Dimension**ìœ¼ë¡œ ë“±ë¡í•´ì•¼ í•©ë‹ˆë‹¤.

### Step 1: GA4 ê´€ë¦¬ì í˜ì´ì§€ ì ‘ì†

1. [Google Analytics](https://analytics.google.com/) ì ‘ì†
2. ì¢Œì¸¡ í•˜ë‹¨ **âš™ï¸ ê´€ë¦¬** í´ë¦­
3. **ì†ì„±** ì—´ì—ì„œ í•´ë‹¹ ì†ì„± ì„ íƒ

### Step 2: Custom Dimension ìƒì„±

1. **ì†ì„±** > **ë§ì¶¤ ì •ì˜** > **ë§ì¶¤ ì¸¡ì •ê¸°ì¤€** í´ë¦­
2. **ë§ì¶¤ ì¸¡ì •ê¸°ì¤€ ë§Œë“¤ê¸°** í´ë¦­
3. ì•„ë˜ í•­ëª©ë“¤ì„ í•˜ë‚˜ì”© ì¶”ê°€:

#### ğŸ“‹ ì¶”ê°€í•  Custom Dimensions

| ì¸¡ì •ê¸°ì¤€ ì´ë¦„ (í•œê¸€) | ì´ë²¤íŠ¸ ë§¤ê°œë³€ìˆ˜ | ë²”ìœ„ | ì„¤ëª… |
|-------------------|----------------|------|------|
| ê³ ê° ì´ë¦„ | `customer_name` | EVENT | ì£¼ë¬¸ì ì´ë¦„ |
| ê³ ê° ì´ë©”ì¼ | `customer_email` | EVENT | ì£¼ë¬¸ì ì´ë©”ì¼ |
| ê³ ê° ì „í™”ë²ˆí˜¸ | `customer_phone` | EVENT | ì£¼ë¬¸ì ì „í™”ë²ˆí˜¸ |
| ë°°ì†¡ ì£¼ì†Œ | `shipping_address` | EVENT | ë°°ì†¡ì§€ ì£¼ì†Œ |
| ë°°ì†¡ ìš°í¸ë²ˆí˜¸ | `shipping_postal_code` | EVENT | ë°°ì†¡ì§€ ìš°í¸ë²ˆí˜¸ |

**ì˜ˆì‹œ ì„¤ì •**:
- **ì¸¡ì •ê¸°ì¤€ ì´ë¦„**: ê³ ê° ì´ë¦„
- **ë²”ìœ„**: ì´ë²¤íŠ¸
- **ì´ë²¤íŠ¸ ë§¤ê°œë³€ìˆ˜**: `customer_name`
- **ì„¤ëª…**: ì£¼ë¬¸ ì‹œ ê³ ê° ì´ë¦„

### Step 3: ë³´ê³ ì„œì—ì„œ í™•ì¸

1. **ë³´ê³ ì„œ** > **ìˆ˜ìµ ì°½ì¶œ** > **ì „ììƒê±°ë˜ êµ¬ë§¤** í´ë¦­
2. ìš°ì¸¡ ìƒë‹¨ ì—°í•„ ì•„ì´ì½˜ (ë³´ê³ ì„œ ë§ì¶¤ì„¤ì •) í´ë¦­
3. **ì¸¡ì •ê¸°ì¤€** íƒ­ > **ì¸¡ì •ê¸°ì¤€ ì¶”ê°€** í´ë¦­
4. ë°©ê¸ˆ ìƒì„±í•œ **ê³ ê° ì´ë¦„**, **ê³ ê° ì´ë©”ì¼** ë“±ì„ ì¶”ê°€
5. **ì ìš©** > **ì €ì¥** í´ë¦­

## ğŸ“Š ì˜ˆìƒ ê²°ê³¼

ì„¤ì • ì™„ë£Œ í›„ GA4 ë³´ê³ ì„œì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ í‘œì‹œë©ë‹ˆë‹¤:

| ê±°ë˜ ID | ê³ ê° ì´ë¦„ | ê³ ê° ì´ë©”ì¼ | ê±°ë˜ì•¡ | ìƒí’ˆ ìˆ˜ |
|---------|----------|------------|--------|---------|
| ORD-20251106-1234 | í™ê¸¸ë™ | hong@example.com | â‚©50,000 | 3 |
| ORD-20251106-5678 | ê¹€ì² ìˆ˜ | kim@example.com | â‚©120,000 | 5 |

## âš ï¸ ì£¼ì˜ì‚¬í•­

### 1. ë°ì´í„° ë°˜ì˜ ì‹œê°„
- Custom Dimension ìƒì„± í›„ **24-48ì‹œê°„** í›„ë¶€í„° ë°ì´í„° ìˆ˜ì§‘ ì‹œì‘
- ê³¼ê±° ë°ì´í„°ì—ëŠ” ì ìš©ë˜ì§€ ì•ŠìŒ (ì†Œê¸‰ ì ìš© ë¶ˆê°€)

### 2. Custom Dimension í•œë„
- GA4 ë¬´ë£Œ ë²„ì „: **ìµœëŒ€ 50ê°œ** Custom Dimensions
- GA4 360 ë²„ì „: **ìµœëŒ€ 125ê°œ** Custom Dimensions

### 3. ê°œì¸ì •ë³´ ë³´í˜¸
- ê³ ê° ì´ë©”ì¼, ì „í™”ë²ˆí˜¸ ë“±ì€ ê°œì¸ì •ë³´ì…ë‹ˆë‹¤
- GA4ì—ì„œ IP ìµëª…í™” ì„¤ì • í™•ì¸ ê¶Œì¥
- **ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨**ì— GA ìˆ˜ì§‘ í•­ëª© ëª…ì‹œ í•„ìš”

### 4. ë°ì´í„° ë³´ì¡´ ê¸°ê°„
- GA4 ê¸°ë³¸ ë³´ì¡´ ê¸°ê°„: **2ê°œì›”** (ë¬´ë£Œ ë²„ì „)
- ì†ì„± ì„¤ì • > ë°ì´í„° ë³´ì¡´ì—ì„œ **14ê°œì›”**ë¡œ ë³€ê²½ ê¶Œì¥

## ğŸ§ª í…ŒìŠ¤íŠ¸ ë°©ë²•

### 1. ì‹¤ì‹œê°„ ë³´ê³ ì„œ í™•ì¸
1. GA4 > **ë³´ê³ ì„œ** > **ì‹¤ì‹œê°„** í´ë¦­
2. í…ŒìŠ¤íŠ¸ ì£¼ë¬¸ ìƒì„±
3. 1-2ë¶„ ë‚´ì— ì‹¤ì‹œê°„ ì´ë²¤íŠ¸ì— `purchase` ì´ë²¤íŠ¸ í™•ì¸
4. ì´ë²¤íŠ¸ í´ë¦­ > ë§¤ê°œë³€ìˆ˜ì—ì„œ `customer_name` ë“± í™•ì¸

### 2. DebugView ì‚¬ìš© (ê¶Œì¥)
1. Chrome í™•ì¥ í”„ë¡œê·¸ë¨ **Google Analytics Debugger** ì„¤ì¹˜
2. í™•ì¥ í”„ë¡œê·¸ë¨ í™œì„±í™”
3. í…ŒìŠ¤íŠ¸ ì£¼ë¬¸ ì§„í–‰
4. GA4 > **êµ¬ì„±** > **DebugView** í´ë¦­
5. ì‹¤ì‹œê°„ìœ¼ë¡œ ì „ì†¡ë˜ëŠ” ëª¨ë“  íŒŒë¼ë¯¸í„° í™•ì¸ ê°€ëŠ¥

### 3. ë¸Œë¼ìš°ì € ì½˜ì†” í™•ì¸
- ì£¼ë¬¸ ì™„ë£Œ í˜ì´ì§€ì—ì„œ F12 (ê°œë°œì ë„êµ¬) ì—´ê¸°
- ì½˜ì†”ì— ë‹¤ìŒ ë¡œê·¸ í™•ì¸:
  ```
  âœ… GA Purchase Event: {
    transaction_id: "ORD-20251106-1234",
    customer_name: "í™ê¸¸ë™",
    value: 50000
  }
  ```

## ğŸ“š ì°¸ê³  ë§í¬

- [GA4 ë§ì¶¤ ì¸¡ì •ê¸°ì¤€ ë§Œë“¤ê¸°](https://support.google.com/analytics/answer/10075209)
- [GA4 ì „ììƒê±°ë˜ ì´ë²¤íŠ¸](https://developers.google.com/analytics/devguides/collection/ga4/ecommerce)
- [GA4 DebugView ì‚¬ìš©ë²•](https://support.google.com/analytics/answer/7201382)

## ğŸ¯ ì²´í¬ë¦¬ìŠ¤íŠ¸

ì„¤ì • ì™„ë£Œ í™•ì¸ìš© ì²´í¬ë¦¬ìŠ¤íŠ¸:

- [ ] GA4 ì†ì„± ì ‘ì† í™•ì¸
- [ ] Custom Dimension 5ê°œ ìƒì„± ì™„ë£Œ
  - [ ] customer_name
  - [ ] customer_email
  - [ ] customer_phone
  - [ ] shipping_address
  - [ ] shipping_postal_code
- [ ] ë³´ê³ ì„œì— Custom Dimension ì¶”ê°€ ì™„ë£Œ
- [ ] í…ŒìŠ¤íŠ¸ ì£¼ë¬¸ìœ¼ë¡œ ë°ì´í„° ì „ì†¡ í™•ì¸
- [ ] ì‹¤ì‹œê°„ ë³´ê³ ì„œì—ì„œ ì´ë²¤íŠ¸ í™•ì¸
- [ ] 24-48ì‹œê°„ í›„ ë³´ê³ ì„œì—ì„œ ê³ ê° ì´ë¦„ í™•ì¸

## ğŸ’¡ ì¶”ê°€ í™œìš©

### 1. ë§ì¶¤ ë³´ê³ ì„œ ìƒì„±
- **íƒìƒ‰** > **ë¹ˆ í™”ë©´** > ìƒˆ íƒìƒ‰ ë§Œë“¤ê¸°
- í–‰: ê³ ê° ì´ë¦„
- ê°’: ê±°ë˜ ìˆ˜ìµ, ê±°ë˜ìˆ˜
- í•„í„°: ë‚ ì§œ ë²”ìœ„

### 2. ì ì¬ê³ ê° ìƒì„±
- **ê´€ë¦¬** > **ì ì¬ê³ ê°** > **ìƒˆ ì ì¬ê³ ê°**
- ì¡°ê±´: ê³ ê° ì´ë©”ì¼ í¬í•¨
- í™œìš©: Google Ads ë¦¬ë§ˆì¼€íŒ…

### 3. BigQuery ì—°ë™ (ê³ ê¸‰)
- GA4 > BigQuery ì—°ë™ ì‹œ ëª¨ë“  Custom Parameter ìë™ ì €ì¥
- SQLë¡œ ê³ ê°ë³„ êµ¬ë§¤ ë¶„ì„ ê°€ëŠ¥

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-11-06
**ì‘ì„±ì**: Claude (AI Assistant)
**ê´€ë ¨ íŒŒì¼**:
- `lib/analytics.js`
- `app/orders/[id]/complete/page.js`
