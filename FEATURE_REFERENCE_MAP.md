# FEATURE_REFERENCE_MAP.md - 인덱스

**⚠️ 중요: 이 파일은 인덱스 파일입니다**

원본 파일이 너무 커서 3개 파트로 분할되었습니다.

**⚠️ 문서 작성 시 주의사항:**
- **각 PART 파일은 25,000 토큰을 초과하지 않아야 합니다** (Claude 읽기 제한)
- 내용 추가 시 파일 크기를 확인하고, 25,000 토큰에 가까워지면 **PART4, PART5로 추가 분할** 필요
- 새로운 PART 파일 생성 시 이 인덱스 파일에 반드시 추가하고, CLAUDE.md도 업데이트할 것

---

## 📂 파일 구성

### Part 1: 주문 + 상품 관련
**파일**: `FEATURE_REFERENCE_MAP_PART1.md`

**내용**:
- 📖 사용 방법
- 🎯 전체 기능 분류 목차
- **1. 주문 관련 기능** (20개)
  - 1.1 주문 생성 ⭐
  - 1.2 주문 조회 (사용자)
  - 1.3 주문 조회 (관리자)
  - 1.4 주문 상세 조회
  - 1.5 주문 상태 변경 ⭐
  - 1.6 일괄 상태 변경 ⭐
  - 1.7 주문 취소 ⭐
  - 1.8~1.20 기타 주문 기능
- **2. 상품 관련 기능** (19개)
  - 2.1 상품 등록 ⭐
  - 2.2 상품 수정 ⭐
  - 2.11 상품 노출 설정 ⭐
  - 2.19 관리자 상품 일괄 업데이트 ⭐ (2025-10-13 신규)
  - 2.3~2.18 기타 상품 기능

### Part 2: Variant + 사용자 + 인증 + 공급업체
**파일**: `FEATURE_REFERENCE_MAP_PART2.md`

**내용**:
- **3. Variant/옵션 관련 기능** (12개)
  - 3.1 Variant 생성 ⭐
  - 3.2 Variant 재고 관리 ⭐
  - 3.3 Variant 재고 확인 ⭐
  - 3.4~3.12 기타 Variant 기능
- **4. 사용자/프로필 관련 기능** (10개)
  - 4.1 프로필 조회
  - 4.2 프로필 수정 ⭐
  - 4.3 프로필 정규화 ⭐
  - 4.4~4.10 기타 사용자 기능
- **5. 인증 관련 기능** (6개)
  - 5.1 로그인 (일반)
  - 5.2 로그인 (카카오) ⭐
  - 5.3~5.6 기타 인증 기능
- **6. 공급업체/발주 관련 기능** (7개)
  - 6.1 발주서 생성 ⭐
  - 6.2~6.7 기타 발주 기능

### Part 3: 배송 + 쿠폰 + 통계
**파일**: `FEATURE_REFERENCE_MAP_PART3.md`

**내용**:
- **7. 배송 관련 기능** (5개)
  - 7.1 배송비 계산 ⭐
  - 7.2 도서산간 배송비 추가 ⭐
  - 7.3~7.5 기타 배송 기능
- **8. 쿠폰 관련 기능** (10개)
  - 8.1 쿠폰 생성 ⭐
  - 8.2 쿠폰 배포 (개별) ⭐
  - 8.3 쿠폰 배포 (전체) ⭐
  - 8.4 쿠폰 검증 ⭐
  - 8.5 쿠폰 사용 처리 ⭐
  - 8.6~8.10 기타 쿠폰 기능
- **9. 통계/분석 기능** (5개)
- **10. 기타 기능** (10개)

---

## 🔍 Claude용 검색 가이드

### 방법 1: 기능 번호로 검색 (추천)

특정 기능을 찾을 때:

```bash
# 예: "1.5 주문 상태 변경" 찾기
Grep tool로 "### 1.5" 검색 → PART1 파일에서 찾기

# 예: "3.2 Variant 재고 관리" 찾기
Grep tool로 "### 3.2" 검색 → PART2 파일에서 찾기

# 예: "7.1 배송비 계산" 찾기
Grep tool로 "### 7.1" 검색 → PART3 파일에서 찾기

# 예: "8.1 쿠폰 생성" 찾기
Grep tool로 "### 8.1" 검색 → PART3 파일에서 찾기
```

### 방법 2: 카테고리별로 파일 선택

- **주문/상품** 관련? → `FEATURE_REFERENCE_MAP_PART1.md` 읽기
- **Variant/사용자/인증/공급업체** 관련? → `FEATURE_REFERENCE_MAP_PART2.md` 읽기
- **배송/쿠폰/통계** 관련? → `FEATURE_REFERENCE_MAP_PART3.md` 읽기

---

## 🎯 빠른 참조표

| 기능 카테고리 | 파일 | 주요 기능 |
|--------------|------|----------|
| 1. 주문 | PART1 | 주문 생성(1.1), 상태 변경(1.5), 일괄결제(1.19) |
| 2. 상품 | PART1 | 상품 등록(2.1), 수정(2.2), 라이브(2.13~2.16) |
| 3. Variant | PART2 | Variant 생성(3.1), 재고 관리(3.2), 재고 확인(3.3) |
| 4. 사용자 | PART2 | 프로필 수정(4.2), 정규화(4.3), 주소 관리(4.5) |
| 5. 인증 | PART2 | 카카오 로그인(5.2), 일반 로그인(5.1) |
| 6. 공급업체 | PART2 | 발주서 생성(6.1), 업체 관리(6.2~6.7) |
| 7. 배송 | PART3 | 배송비 계산(7.1), 도서산간(7.2) |
| 8. 쿠폰 | PART3 | 쿠폰 생성(8.1), 배포(8.2~8.3), 검증(8.4), 사용(8.5) |
| 9. 통계 | PART3 | 주문 통계, 매출 분석 |
| 10. 기타 | PART3 | 로그, 알림, 설정 등 |

---

## 📋 워크플로우 (Claude 자동 실행)

### 사용자 요청 접수 시:

1. **기능 파악**: 어떤 카테고리인가? (주문? 상품? Variant? 배송? 쿠폰?)
2. **파일 선택**: 위 빠른 참조표에서 해당 PART 파일 선택
3. **상세 내용 읽기**: 해당 PART 파일에서 기능 번호(예: ### 1.5) 검색
4. **영향도 파악**:
   - 영향받는 페이지 확인
   - 연관 기능 확인
   - 필수 체크리스트 확인
5. **작업 시작**: 체크리스트 기반으로 작업 진행

---

## 🆕 최근 수정 이력

**2025-10-13**: 관리자 상품 관리 Service Role API 추가 + 수량 조절 기능 제거
- **2.1 상품 등록**: Service Role API 추가 (`/api/admin/products/create`)
- **2.11 상품 노출 설정**: Service Role API 추가 (`/api/admin/products/toggle-visibility`)
- **2.19 관리자 상품 일괄 업데이트**: 신규 추가 (`/api/admin/products/bulk-update`)
- **1.2 주문 조회**: 상품 그룹화 기능 추가 (`groupOrderItems`)
- **1.9 주문 수량 변경**: 동시성 문제로 기능 제거 (140줄 코드 제거)

**2025-10-08**: 전체 문서 업데이트 (실제 코드베이스 기반)
- CODEBASE_STRUCTURE_REPORT.md 반영
- DB_SCHEMA_ANALYSIS_COMPLETE.md 반영
- 128개 파일, 36개 페이지 분석 결과 반영
- 쿠폰 시스템 완전 문서화 (8.1~8.10)

**2025-10-07**: 버그 수정 반영
- 장바구니 주문 생성 버그 수정 (1.1)
- 수량 변경 시 variant 재고 검증 추가 (1.9, 3.2)
- 관리자 쿠폰 생성 Service Role API 전환 (8.1)

**2025-10-05**: RLS 정책 및 성능 최적화
- 카카오 사용자 매칭 수정 (1.2, 5.2)
- RLS 정책 성능 최적화 (인덱스 3개, 헬퍼 함수 2개)
- 쿠폰 사용 처리 완전 해결 (8.5)

**2025-10-04**: 쿠폰 시스템 추가 (PART3)
- 8.1 쿠폰 생성
- 8.2 쿠폰 배포 (개별)
- 8.3 쿠폰 배포 (전체)
- 8.4 쿠폰 검증
- 8.5 쿠폰 사용 처리

**2025-10-03**: 우편번호 시스템 통합 (PART3)
- 7.1 배송비 계산
- 7.2 도서산간 배송비 추가

**2025-10-02**: 발주 시스템 추가 (PART2)
- 6.1 발주서 생성

**2025-10-01**: Variant 시스템 구축 (PART2)
- 3.1 Variant 생성
- 3.2 Variant 재고 관리

---

**업데이트**: 2025-10-08
**분할 이유**: 원본 파일 크기 초과 (Claude 읽기 제한 25,000 토큰)
**총 기능 수**: 81개
**실제 코드베이스**: 128개 파일, 36개 페이지, 67개 API 엔드포인트, 12개 lib 함수 파일
